{% extends 'base.html' %}
{% load crispy_forms_tags %} {% load static %}
{% block title %} Important Update {% endblock title %}

{% block main %}
  {% if request.user.is_superuser %}
    <div class="row py-3">
      <div class="col-md-12 m-auto">
        <div class="card shadow">
          <div class="card-header d-flex justify-content-between">
            <h3 class="card-title fw-semibold">Updates</h3>
            <a href="{% url "core:update_news" %}" class="btn btn-dark">Add Updates</a>
          </div>
          <div class="table-responsive">
            <table class="table card-table table-vcenter text-nowrap datatable" id="student_list">
              <thead>
              <tr>
                <th class="w-1">S.N.</th>
                <th>Preview</th>
                <th>Update</th>
                <th>Upload Date</th>
              </tr>
              </thead>
              <tbody>
              {% for object in object_list %}
                <tr>
                  <td>
                    <span class="text-secondary">{{ forloop.counter0|add:page_obj.start_index }}</span>.
                  </td>
                  <td>
                    {% if object.image %}
                      <a href="{{ object.get_image_url|default_if_none:'-' }}" target="_blank">Preview</a>
                    {% else %}
                      -
                    {% endif %}
                  </td>
                  <td>{{ object.update|safe|default_if_none:'-' }}</td>
                  <td>
                    {{ object.created|default_if_none:'-' }}
                  </td>
                </tr>
              {% endfor %}
              </tbody>
            </table>
          </div>
          <div class="card-footer d-flex align-items-center" up-hungry>
            {% include 'utils/pagination.html' %}
          </div>
        </div>
      </div>
    </div>
  {% else %}
    <div class="row py-3">
      <div class="col-md-12 m-auto">
        <div class="card shadow">
          <div class="card-header">

              <div class="d-flex flex-row justify-content-between align-items-center" style="width: 100%">
                <div class="col-auto">
                  <div class="card-title">Important Update</div>
                </div>
                <div class="d-flex flex-row gap-4" style="display: flex !important">
                  <a class="carousel-control-prev bg-primary" href="#carousel-captions" role="button" data-bs-slide="prev" style="width: fit-content;height: fit-content; display: flex !important; position: relative !important;">
                  <span class="carousel-control-prev-icon d-flex" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
                </a>
                <a class="carousel-control-next bg-primary" href="#carousel-captions" role="button" data-bs-slide="next" style="width: fit-content;height: fit-content; display: flex !important; position: relative !important;">
                  <span class="carousel-control-next-icon d-flex" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
                </a>
                </div>
              </div>

          </div>
          <div class="card-body">
            {% if object_list %}
              <div id="carousel-captions" class="carousel slide" data-bs-ride="carousel">



                <div class="carousel-inner">
                  {% for object in object_list %}
                    <div class="carousel-item {% if forloop.first %}active{% endif %}">
                      <div style="text-align: right;">{{ object.created }}</div>
                      {% if object.image %}
                        <img class="d-block w-100" style="height: 400px" alt="{{ object.country }}"
                             src="{{ object.image.url }}">

                      {% else %}
                        {#                        <div style="text-align: right;">{{ object.created }}</div>#}
                        <p>{{ object.update|safe }}</p>
                      {% endif %}
                    </div>
                  {% endfor %}
                </div>
              </div>
            {% else %}
              <h3 class="text-center text-primary">No Important Update Available</h3>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer"></div>
  {% endif %}
{% endblock %}
